<div style="width: 800px; height: 600px;"><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>      
        <div id="bertviz-8bd47db68a9840e299d403af34b572db" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">
            <span style="user-select:none">
                
            </span>
            <div id='vis'></div>
        </div>
    
<script type="text/javascript">
/**
 * @fileoverview Transformer Visualization D3 javascript code.
 *
 * Based on: https://github.com/tensorflow/tensor2tensor/blob/master/tensor2tensor/visualization/attention.js
 *
 * Change log:
 *
 * 02/01/19  Jesse Vig   Initial implementation
 * 12/31/20  Jesse Vig   Support multiple visualizations in single notebook.
 * 01/19/21  Jesse Vig   Support light/dark modes
 * 02/06/21  Jesse Vig   Move require config from separate jupyter notebook step
 * 05/03/21  Jesse Vig   Adjust visualization height dynamically
 * 03/23/22  Daniel SC   Update requirement URLs for d3 and jQuery (source of bug not allowing end result to be displayed on browsers)
 **/

require.config({
    paths: {
        d3: 'https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min',
      jquery: 'https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min',
    }
  });
  
  requirejs(['jquery', 'd3'], function($, d3) {
  
          const params = {"attention": [{"name": null, "attn": [[[[1.1111111640930176, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.9322137832641602, 0.1788974106311798, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5191556215286255, 0.25763222575187683, 0.33432328701019287, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.3527853786945343, 0.0, 0.255085289478302, 0.16746537387371063, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.41071659326553345, 0.11855845898389816, 0.1516842246055603, 0.0, 0.20546245574951172, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.15116703510284424, 0.13074499368667603, 0.3078238368034363, 0.23038943111896515, 0.18513832986354828, 0.10584753751754761, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.18938519060611725, 0.07576566934585571, 0.0, 0.120991550385952, 0.0, 0.26086968183517456, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.07454729080200195, 0.19656096398830414, 0.17791572213172913, 0.09688173234462738, 0.10402196645736694, 0.0, 0.18584954738616943, 0.15221242606639862, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.15931899845600128, 0.0, 0.14668765664100647, 0.11163480579853058, 0.11977771669626236, 0.1564224362373352, 0.14975234866142273, 0.07533751428127289, 0.07691097259521484, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.10486822575330734, 0.07324260473251343, 0.1377211958169937, 0.09312013536691666, 0.08836670219898224, 0.1898999959230423, 0.07354194670915604, 0.1920524388551712, 0.08360084891319275, 0.07469707727432251, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.11315122991800308, 0.07318573445081711, 0.08712988346815109, 0.06633353233337402, 0.0968809649348259, 0.1294705867767334, 0.10232024639844894, 0.13626429438591003, 0.06280997395515442, 0.0, 0.07884157449007034, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.06130782887339592, 0.11973520368337631, 0.09588810056447983, 0.0, 0.10243972390890121, 0.11302987486124039, 0.07880496978759766, 0.06362638622522354, 0.05549585819244385, 0.08063866943120956, 0.10430319607257843, 0.1150725856423378, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.037062034010887146, 0.0387779138982296, 0.06592395156621933, 0.07611195743083954, 0.02315707318484783, 0.10487805306911469, 0.13717347383499146, 0.06416300684213638, 0.05014346167445183, 0.1437036544084549, 0.24146316945552826, 0.06958942115306854, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0748940035700798, 0.06140301004052162, 0.14134901762008667, 0.04377059265971184, 0.0695040374994278, 0.08549592643976212, 0.11503715068101883, 0.051726922392845154, 0.06745956838130951, 0.14529162645339966, 0.08152692764997482, 0.06873340904712677, 0.05632429197430611, 0.04859466478228569, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.08306930214166641, 0.0, 0.0, 0.0, 0.06674546748399734, 0.10589192807674408, 0.045096151530742645, 0.074750617146492, 0.08217231184244156, 0.06164644658565521, 0.04463643208146095, 0.051715999841690063, 0.0, 0.030969122424721718, 0.051694512367248535, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.05935022607445717, 0.06337917596101761, 0.06643348932266235, 0.07445378601551056, 0.05798420310020447, 0.04031979665160179, 0.048847198486328125, 0.049647681415081024, 0.08707861602306366, 0.05811600387096405, 0.06917601078748703, 0.037102844566106796, 0.07076656818389893, 0.0, 0.1931544542312622, 0.022647596895694733, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.09074588865041733, 0.082268625497818, 0.09479943662881851, 0.02670692652463913, 0.07519098371267319, 0.03927570953965187, 0.0, 0.07097691297531128, 0.04359547421336174, 0.0, 0.07300792634487152, 0.10377021878957748, 0.0872061625123024, 0.0330379419028759, 0.09242181479930878, 0.05168648436665535, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.02486024796962738, 0.054648637771606445, 0.05932240188121796, 0.027292270213365555, 0.0, 0.05725599452853203, 0.03928958624601364, 0.04589533805847168, 0.045290108770132065, 0.08694400638341904, 0.11243285983800888, 0.025847988203167915, 0.0369817353785038, 0.08725317567586899, 0.11627477407455444, 0.10333133488893509, 0.11596386134624481, 0.03384809568524361, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.04334953427314758, 0.06261778622865677, 0.08589094877243042, 0.028461823239922523, 0.06339146941900253, 0.060468945652246475, 0.0, 0.06949160248041153, 0.01729455776512623, 0.034533318132162094, 0.06643595546483994, 0.03285495191812515, 0.03674860671162605, 0.06026091426610947, 0.13341024518013, 0.06656891107559204, 0.06631706655025482, 0.0634554848074913, 0.0802559107542038, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.027752557769417763, 0.0498671755194664, 0.1005324050784111, 0.043720077723264694, 0.08590786159038544, 0.057628337293863297, 0.0, 0.04724862053990364, 0.0, 0.1003144383430481, 0.03311016783118248, 0.025341279804706573, 0.029824143275618553, 0.0, 0.149015411734581, 0.04195000231266022, 0.025206174701452255, 0.05400123819708824, 0.04638853669166565, 0.053367987275123596, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.03972766548395157, 0.06671416014432907, 0.053843095898628235, 0.05711416155099869, 0.06069411709904671, 0.07361042499542236, 0.0, 0.0, 0.03479311242699623, 0.053854264318943024, 0.07460469752550125, 0.04275622218847275, 0.049025293439626694, 0.08656715601682663, 0.0, 0.042846355587244034, 0.03402591869235039, 0.04050491377711296, 0.07202219218015671, 0.05619386211037636, 0.05465882271528244, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0202513188123703, 0.09537870436906815, 0.0, 0.06724371761083603, 0.0451236255466938, 0.04575628414750099, 0.026962151750922203, 0.043671511113643646, 0.025186976417899132, 0.021600181236863136, 0.03983774036169052, 0.05783982202410698, 0.0275223758071661, 0.06609760224819183, 0.051050614565610886, 0.13922016322612762, 0.05076655372977257, 0.09066734462976456, 0.0, 0.07946696877479553, 0.0, 0.032262347638607025, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.010431268252432346, 0.023377802222967148, 0.0, 0.01676301471889019, 0.024620674550533295, 0.06973903626203537, 0.02271546982228756, 0.017794474959373474, 0.045846033841371536, 0.06577697396278381, 0.03360162302851677, 0.02260274812579155, 0.07774142920970917, 0.11832237988710403, 0.07078301906585693, 0.024506505578756332, 0.05706203728914261, 0.04707755520939827, 0.04506521672010422, 0.05082184448838234, 0.06696119904518127, 0.06857234239578247, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.04192345589399338, 0.04469708353281021, 0.04911847412586212, 0.07546275109052658, 0.03992364555597305, 0.04019547998905182, 0.035933718085289, 0.0513298474252224, 0.02553534507751465, 0.04531695321202278, 0.06264032423496246, 0.0501064658164978, 0.03208395466208458, 0.030582042410969734, 0.0746268481016159, 0.041815679520368576, 0.0399990975856781, 0.0, 0.054624855518341064, 0.03899846971035004, 0.03131028264760971, 0.05309398099780083, 0.029573410749435425, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.07386137545108795, 0.015644654631614685, 0.04279574379324913, 0.03308793157339096, 0.04768846929073334, 0.03144662454724312, 0.04626540094614029, 0.03102724626660347, 0.01953093148767948, 0.02040932886302471, 0.046327389776706696, 0.06733836233615875, 0.0530429407954216, 0.04189574718475342, 0.018594074994325638, 0.029210437089204788, 0.031143605709075928, 0.03953417018055916, 0.047847259789705276, 0.0852743610739708, 0.06264357268810272, 0.030852308496832848, 0.07297423481941223, 0.046384796500205994, 0.07629004865884781, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.023935945704579353, 0.023847149685025215, 0.046767376363277435, 0.025356944650411606, 0.037625446915626526, 0.05888801068067551, 0.04520681872963905, 0.06361796706914902, 0.01732458733022213, 0.08168010413646698, 0.06465046852827072, 0.0, 0.01648654416203499, 0.06072189658880234, 0.07857208698987961, 0.03781714290380478, 0.056264422833919525, 0.05299719423055649, 0.04247657209634781, 0.0510023757815361, 0.029231013730168343, 0.016648389399051666, 0.05143105983734131, 0.051131721585989, 0.02402045577764511, 0.03091702051460743, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0411955863237381, 0.0324186235666275, 0.02232794277369976, 0.0, 0.0, 0.07802265882492065, 0.03786338493227959, 0.06206635385751724, 0.07332667708396912, 0.05087235942482948, 0.0, 0.026708081364631653, 0.011086211539804935, 0.0735291838645935, 0.061117734760046005, 0.0, 0.026452569290995598, 0.02282886393368244, 0.07271154969930649, 0.028086990118026733, 0.0, 0.05647733435034752, 0.03374981880187988, 0.03152710944414139, 0.03139329329133034, 0.026003850623965263, 0.024761253967881203, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.03292062133550644, 0.016388224437832832, 0.04044576734304428, 0.045900385826826096, 0.03715579956769943, 0.03269994258880615, 0.022122178226709366, 0.0414983406662941, 0.07897834479808807, 0.02742137387394905, 0.024573585018515587, 0.04914024844765663, 0.041245292872190475, 0.09270524233579636, 0.0, 0.0, 0.05526837334036827, 0.04679781571030617, 0.0, 0.026091357693076134, 0.0, 0.0, 0.01830713078379631, 0.018229003995656967, 0.021504269912838936, 0.03894289955496788, 0.01664010062813759, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.048605069518089294, 0.03516959771513939, 0.02503431960940361, 0.034061498939991, 0.06300204247236252, 0.028588129207491875, 0.03264378011226654, 0.03675905242562294, 0.037155985832214355, 0.033944230526685715, 0.021331829950213432, 0.06176263466477394, 0.03407171368598938, 0.03461218997836113, 0.03295012563467026, 0.054386988282203674, 0.02398313581943512, 0.0450650118291378, 0.09316810965538025, 0.01821911893785, 0.04433128610253334, 0.0, 0.01380995474755764, 0.01894603855907917, 0.03727809339761734, 0.033102333545684814, 0.04216417297720909, 0.030846409499645233, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.044334929436445236, 0.017599057406187057, 0.026665816083550453, 0.03159377723932266, 0.03169697895646095, 0.03751502186059952, 0.08041731268167496, 0.03858634829521179, 0.01672041043639183, 0.0463518425822258, 0.085988849401474, 0.0, 0.023010844364762306, 0.0, 0.0676378458738327, 0.061589986085891724, 0.02981223352253437, 0.03354836627840996, 0.0379948616027832, 0.04365132376551628, 0.0286547914147377, 0.03866209462285042, 0.03467283770442009, 0.020947253331542015, 0.0437810905277729, 0.03520848974585533, 0.030972834676504135, 0.018557224422693253, 0.03552866727113724, 0.010336976498365402, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.013342865742743015, 0.009065402671694756, 0.031760718673467636, 0.02159995213150978, 0.007507604081183672, 0.07214376330375671, 0.037310756742954254, 0.055029913783073425, 0.013324612751603127, 0.03581457585096359, 0.07184229046106339, 0.022355053573846817, 0.09529736638069153, 0.020676864311099052, 0.05573515221476555, 0.03515492007136345, 0.07674787938594818, 0.0, 0.03654084727168083, 0.044378429651260376, 0.05790708586573601, 0.029054632410407066, 0.027962837368249893, 0.009998951107263565, 0.031594835221767426, 0.05194364860653877, 0.016478396952152252, 0.023244541138410568, 0.020894695073366165, 0.030298219993710518, 0.03940480947494507, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.03896529600024223, 0.026641154661774635, 0.06660964339971542, 0.011107578873634338, 0.05064469203352928, 0.018017174676060677, 0.03027702309191227, 0.018030140548944473, 0.05541054904460907, 0.040787141770124435, 0.0, 0.028278371319174767, 0.049063097685575485, 0.03408852219581604, 0.026785634458065033, 0.04850954934954643, 0.021147027611732483, 0.02970077469944954, 0.030552156269550323, 0.054889027029275894, 0.030007118359208107, 0.03886327147483826, 0.021138165146112442, 0.02185724303126335, 0.020210905000567436, 0.012415396980941296, 0.04752779379487038, 0.028833096846938133, 0.04159947484731674, 0.06436329334974289, 0.055309928953647614, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.020406099036335945, 0.03161321207880974, 0.019291341304779053, 0.014218577183783054, 0.017622560262680054, 0.06313778460025787, 0.0775064080953598, 0.022586727514863014, 0.01295322086662054, 0.028156157582998276, 0.02650834061205387, 0.00984952226281166, 0.013788028620183468, 0.037742845714092255, 0.04585598036646843, 0.029503874480724335, 0.0, 0.06858647614717484, 0.0, 0.013569622300565243, 0.05268209055066109, 0.0, 0.023981552571058273, 0.021303487941622734, 0.036548055708408356, 0.022907892242074013, 0.0, 0.014242244884371758, 0.06634636968374252, 0.024885553866624832, 0.0, 0.021593952551484108, 0.042606420814991, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.035968806594610214, 0.012727705761790276, 0.015346278436481953, 0.04246390610933304, 0.01841692067682743, 0.03491447865962982, 0.042682893574237823, 0.0427049845457077, 0.05148574709892273, 0.03868848830461502, 0.0, 0.031704604625701904, 0.054321326315402985, 0.08639026433229446, 0.026674345135688782, 0.018124254420399666, 0.034402500838041306, 0.01788477599620819, 0.03881850466132164, 0.02958063594996929, 0.03457023948431015, 0.0486316941678524, 0.013790051452815533, 0.026454288512468338, 0.02230415865778923, 0.03292755410075188, 0.023620812222361565, 0.047613032162189484, 0.06554252654314041, 0.013020840473473072, 0.021933285519480705, 0.02023175172507763, 0.012660857290029526, 0.025223325937986374, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.05657435581088066, 0.0, 0.039375968277454376, 0.019898150116205215, 0.032790493220090866, 0.01884673349559307, 0.026852231472730637, 0.024059824645519257, 0.0, 0.021879294887185097, 0.029252199456095695, 0.038027070462703705, 0.029256733134388924, 0.05734080448746681, 0.02166399173438549, 0.03261822089552879, 0.011461659334599972, 0.02364218607544899, 0.031715214252471924, 0.052358485758304596, 0.02474932186305523, 0.016356591135263443, 0.03044928051531315, 0.034890320152044296, 0.01878189668059349, 0.03353229537606239, 0.0, 0.06241042912006378, 0.0, 0.03166871890425682, 0.0421142652630806, 0.0, 0.04456702247262001, 0.021877408027648926, 0.0, 0.0, 0.0, 0.0], [0.011938870884478092, 0.030496718361973763, 0.016004415228962898, 0.0886281207203865, 0.014490684494376183, 0.024081364274024963, 0.022204410284757614, 0.021960515528917313, 0.021755291149020195, 0.016138868406414986, 0.013348708860576153, 0.01802951656281948, 0.02989858202636242, 0.014582904987037182, 0.0, 0.05888908728957176, 0.03710963949561119, 0.03211602196097374, 0.036528125405311584, 0.027167733758687973, 0.021937383338809013, 0.02820602059364319, 0.012160674668848515, 0.024895817041397095, 0.021749310195446014, 0.016399472951889038, 0.035535961389541626, 0.03611653298139572, 0.0, 0.0, 0.0, 0.06653553992509842, 0.03367302194237709, 0.03694474324584007, 0.02974032424390316, 0.04423902928829193, 0.0, 0.0, 0.0], [0.0, 0.03554423153400421, 0.05013546720147133, 0.019508691504597664, 0.029635228216648102, 0.0369403250515461, 0.012302572838962078, 0.03534369170665741, 0.01980842836201191, 0.041608791798353195, 0.01709957793354988, 0.0250095184892416, 0.035963792353868484, 0.011721133254468441, 0.028167370706796646, 0.014605876989662647, 0.02843892201781273, 0.017632614821195602, 0.024527059867978096, 0.022488445043563843, 0.041352082043886185, 0.02436179108917713, 0.036864493042230606, 0.021726733073592186, 0.031509194523096085, 0.021396173164248466, 0.025298209860920906, 0.0715671181678772, 0.06781920790672302, 0.042714543640613556, 0.017347928136587143, 0.011038037948310375, 0.0215179193764925, 0.053087666630744934, 0.030722839757800102, 0.020238209515810013, 0.02526768296957016, 0.0, 0.0], [0.02340962179005146, 0.026645151898264885, 0.016092883422970772, 0.018453406170010567, 0.0, 0.024529505521059036, 0.016422472894191742, 0.0, 0.0, 0.04067758098244667, 0.04319708049297333, 0.0, 0.03746350109577179, 0.03619860112667084, 0.0, 0.0284306388348341, 0.022127848118543625, 0.033096764236688614, 0.0, 0.029580311849713326, 0.03175744414329529, 0.02403065748512745, 0.0, 0.032011762261390686, 0.05366428196430206, 0.02002956159412861, 0.026871025562286377, 0.04143537953495979, 0.03431537747383118, 0.02501310221850872, 0.017144018784165382, 0.06347516179084778, 0.026965834200382233, 0.021599391475319862, 0.03299351781606674, 0.01776975393295288, 0.024357633665204048, 0.07007632404565811, 0.0], [0.009925410151481628, 0.020382679998874664, 0.022773344069719315, 0.023061836138367653, 0.02026316337287426, 0.021814879029989243, 0.009743220172822475, 0.03543981909751892, 0.01178984995931387, 0.009227154776453972, 0.0, 0.021253572776913643, 0.036486364901065826, 0.0509587787091732, 0.02875841036438942, 0.05591472610831261, 0.07920579612255096, 0.030996430665254593, 0.019020531326532364, 0.02842232957482338, 0.037824563682079315, 0.026725850999355316, 0.045420173555612564, 0.015772027894854546, 0.030804723501205444, 0.03712194040417671, 0.036269042640924454, 0.011644357815384865, 0.009864460676908493, 0.027975043281912804, 0.011707214638590813, 0.044539306312799454, 0.0, 0.03726140782237053, 0.0, 0.026777632534503937, 0.01596337929368019, 0.04453521594405174, 0.029432618990540504]]]], "left_text": ["<SOS>", "grabs", "comes", "grabs", "rafts", "uses", "reddish", "floral", "slab", "chow", "rink", "past", "fishers", "backs", "lap", "firefighters", "pursues", "appear", "pizza", "swerves", "scattered", "setting", "spreads", "least", "comic", "officials", "aquos", "football", "blonde", "cutting", "dunk", "tonge", "stocking", "accent", "theme", "prances", "placing", "trekkies", "canvas"], "right_text": ["<SOS>", "grabs", "comes", "grabs", "rafts", "uses", "reddish", "floral", "slab", "chow", "rink", "past", "fishers", "backs", "lap", "firefighters", "pursues", "appear", "pizza", "swerves", "scattered", "setting", "spreads", "least", "comic", "officials", "aquos", "football", "blonde", "cutting", "dunk", "tonge", "stocking", "accent", "theme", "prances", "placing", "trekkies", "canvas"]}], "default_filter": "0", "display_mode": "dark", "root_div_id": "bertviz-8bd47db68a9840e299d403af34b572db", "include_layers": [0], "include_heads": [0], "total_heads": 1}; // HACK: {"attention": [{"name": null, "attn": [[[[1.1111111640930176, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.9322137832641602, 0.1788974106311798, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5191556215286255, 0.25763222575187683, 0.33432328701019287, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.3527853786945343, 0.0, 0.255085289478302, 0.16746537387371063, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.41071659326553345, 0.11855845898389816, 0.1516842246055603, 0.0, 0.20546245574951172, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.15116703510284424, 0.13074499368667603, 0.3078238368034363, 0.23038943111896515, 0.18513832986354828, 0.10584753751754761, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.18938519060611725, 0.07576566934585571, 0.0, 0.120991550385952, 0.0, 0.26086968183517456, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.07454729080200195, 0.19656096398830414, 0.17791572213172913, 0.09688173234462738, 0.10402196645736694, 0.0, 0.18584954738616943, 0.15221242606639862, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.15931899845600128, 0.0, 0.14668765664100647, 0.11163480579853058, 0.11977771669626236, 0.1564224362373352, 0.14975234866142273, 0.07533751428127289, 0.07691097259521484, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.10486822575330734, 0.07324260473251343, 0.1377211958169937, 0.09312013536691666, 0.08836670219898224, 0.1898999959230423, 0.07354194670915604, 0.1920524388551712, 0.08360084891319275, 0.07469707727432251, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.11315122991800308, 0.07318573445081711, 0.08712988346815109, 0.06633353233337402, 0.0968809649348259, 0.1294705867767334, 0.10232024639844894, 0.13626429438591003, 0.06280997395515442, 0.0, 0.07884157449007034, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.06130782887339592, 0.11973520368337631, 0.09588810056447983, 0.0, 0.10243972390890121, 0.11302987486124039, 0.07880496978759766, 0.06362638622522354, 0.05549585819244385, 0.08063866943120956, 0.10430319607257843, 0.1150725856423378, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.037062034010887146, 0.0387779138982296, 0.06592395156621933, 0.07611195743083954, 0.02315707318484783, 0.10487805306911469, 0.13717347383499146, 0.06416300684213638, 0.05014346167445183, 0.1437036544084549, 0.24146316945552826, 0.06958942115306854, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0748940035700798, 0.06140301004052162, 0.14134901762008667, 0.04377059265971184, 0.0695040374994278, 0.08549592643976212, 0.11503715068101883, 0.051726922392845154, 0.06745956838130951, 0.14529162645339966, 0.08152692764997482, 0.06873340904712677, 0.05632429197430611, 0.04859466478228569, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.08306930214166641, 0.0, 0.0, 0.0, 0.06674546748399734, 0.10589192807674408, 0.045096151530742645, 0.074750617146492, 0.08217231184244156, 0.06164644658565521, 0.04463643208146095, 0.051715999841690063, 0.0, 0.030969122424721718, 0.051694512367248535, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.05935022607445717, 0.06337917596101761, 0.06643348932266235, 0.07445378601551056, 0.05798420310020447, 0.04031979665160179, 0.048847198486328125, 0.049647681415081024, 0.08707861602306366, 0.05811600387096405, 0.06917601078748703, 0.037102844566106796, 0.07076656818389893, 0.0, 0.1931544542312622, 0.022647596895694733, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.09074588865041733, 0.082268625497818, 0.09479943662881851, 0.02670692652463913, 0.07519098371267319, 0.03927570953965187, 0.0, 0.07097691297531128, 0.04359547421336174, 0.0, 0.07300792634487152, 0.10377021878957748, 0.0872061625123024, 0.0330379419028759, 0.09242181479930878, 0.05168648436665535, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.02486024796962738, 0.054648637771606445, 0.05932240188121796, 0.027292270213365555, 0.0, 0.05725599452853203, 0.03928958624601364, 0.04589533805847168, 0.045290108770132065, 0.08694400638341904, 0.11243285983800888, 0.025847988203167915, 0.0369817353785038, 0.08725317567586899, 0.11627477407455444, 0.10333133488893509, 0.11596386134624481, 0.03384809568524361, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.04334953427314758, 0.06261778622865677, 0.08589094877243042, 0.028461823239922523, 0.06339146941900253, 0.060468945652246475, 0.0, 0.06949160248041153, 0.01729455776512623, 0.034533318132162094, 0.06643595546483994, 0.03285495191812515, 0.03674860671162605, 0.06026091426610947, 0.13341024518013, 0.06656891107559204, 0.06631706655025482, 0.0634554848074913, 0.0802559107542038, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.027752557769417763, 0.0498671755194664, 0.1005324050784111, 0.043720077723264694, 0.08590786159038544, 0.057628337293863297, 0.0, 0.04724862053990364, 0.0, 0.1003144383430481, 0.03311016783118248, 0.025341279804706573, 0.029824143275618553, 0.0, 0.149015411734581, 0.04195000231266022, 0.025206174701452255, 0.05400123819708824, 0.04638853669166565, 0.053367987275123596, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.03972766548395157, 0.06671416014432907, 0.053843095898628235, 0.05711416155099869, 0.06069411709904671, 0.07361042499542236, 0.0, 0.0, 0.03479311242699623, 0.053854264318943024, 0.07460469752550125, 0.04275622218847275, 0.049025293439626694, 0.08656715601682663, 0.0, 0.042846355587244034, 0.03402591869235039, 0.04050491377711296, 0.07202219218015671, 0.05619386211037636, 0.05465882271528244, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0202513188123703, 0.09537870436906815, 0.0, 0.06724371761083603, 0.0451236255466938, 0.04575628414750099, 0.026962151750922203, 0.043671511113643646, 0.025186976417899132, 0.021600181236863136, 0.03983774036169052, 0.05783982202410698, 0.0275223758071661, 0.06609760224819183, 0.051050614565610886, 0.13922016322612762, 0.05076655372977257, 0.09066734462976456, 0.0, 0.07946696877479553, 0.0, 0.032262347638607025, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.010431268252432346, 0.023377802222967148, 0.0, 0.01676301471889019, 0.024620674550533295, 0.06973903626203537, 0.02271546982228756, 0.017794474959373474, 0.045846033841371536, 0.06577697396278381, 0.03360162302851677, 0.02260274812579155, 0.07774142920970917, 0.11832237988710403, 0.07078301906585693, 0.024506505578756332, 0.05706203728914261, 0.04707755520939827, 0.04506521672010422, 0.05082184448838234, 0.06696119904518127, 0.06857234239578247, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.04192345589399338, 0.04469708353281021, 0.04911847412586212, 0.07546275109052658, 0.03992364555597305, 0.04019547998905182, 0.035933718085289, 0.0513298474252224, 0.02553534507751465, 0.04531695321202278, 0.06264032423496246, 0.0501064658164978, 0.03208395466208458, 0.030582042410969734, 0.0746268481016159, 0.041815679520368576, 0.0399990975856781, 0.0, 0.054624855518341064, 0.03899846971035004, 0.03131028264760971, 0.05309398099780083, 0.029573410749435425, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.07386137545108795, 0.015644654631614685, 0.04279574379324913, 0.03308793157339096, 0.04768846929073334, 0.03144662454724312, 0.04626540094614029, 0.03102724626660347, 0.01953093148767948, 0.02040932886302471, 0.046327389776706696, 0.06733836233615875, 0.0530429407954216, 0.04189574718475342, 0.018594074994325638, 0.029210437089204788, 0.031143605709075928, 0.03953417018055916, 0.047847259789705276, 0.0852743610739708, 0.06264357268810272, 0.030852308496832848, 0.07297423481941223, 0.046384796500205994, 0.07629004865884781, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.023935945704579353, 0.023847149685025215, 0.046767376363277435, 0.025356944650411606, 0.037625446915626526, 0.05888801068067551, 0.04520681872963905, 0.06361796706914902, 0.01732458733022213, 0.08168010413646698, 0.06465046852827072, 0.0, 0.01648654416203499, 0.06072189658880234, 0.07857208698987961, 0.03781714290380478, 0.056264422833919525, 0.05299719423055649, 0.04247657209634781, 0.0510023757815361, 0.029231013730168343, 0.016648389399051666, 0.05143105983734131, 0.051131721585989, 0.02402045577764511, 0.03091702051460743, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0411955863237381, 0.0324186235666275, 0.02232794277369976, 0.0, 0.0, 0.07802265882492065, 0.03786338493227959, 0.06206635385751724, 0.07332667708396912, 0.05087235942482948, 0.0, 0.026708081364631653, 0.011086211539804935, 0.0735291838645935, 0.061117734760046005, 0.0, 0.026452569290995598, 0.02282886393368244, 0.07271154969930649, 0.028086990118026733, 0.0, 0.05647733435034752, 0.03374981880187988, 0.03152710944414139, 0.03139329329133034, 0.026003850623965263, 0.024761253967881203, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.03292062133550644, 0.016388224437832832, 0.04044576734304428, 0.045900385826826096, 0.03715579956769943, 0.03269994258880615, 0.022122178226709366, 0.0414983406662941, 0.07897834479808807, 0.02742137387394905, 0.024573585018515587, 0.04914024844765663, 0.041245292872190475, 0.09270524233579636, 0.0, 0.0, 0.05526837334036827, 0.04679781571030617, 0.0, 0.026091357693076134, 0.0, 0.0, 0.01830713078379631, 0.018229003995656967, 0.021504269912838936, 0.03894289955496788, 0.01664010062813759, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.048605069518089294, 0.03516959771513939, 0.02503431960940361, 0.034061498939991, 0.06300204247236252, 0.028588129207491875, 0.03264378011226654, 0.03675905242562294, 0.037155985832214355, 0.033944230526685715, 0.021331829950213432, 0.06176263466477394, 0.03407171368598938, 0.03461218997836113, 0.03295012563467026, 0.054386988282203674, 0.02398313581943512, 0.0450650118291378, 0.09316810965538025, 0.01821911893785, 0.04433128610253334, 0.0, 0.01380995474755764, 0.01894603855907917, 0.03727809339761734, 0.033102333545684814, 0.04216417297720909, 0.030846409499645233, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.044334929436445236, 0.017599057406187057, 0.026665816083550453, 0.03159377723932266, 0.03169697895646095, 0.03751502186059952, 0.08041731268167496, 0.03858634829521179, 0.01672041043639183, 0.0463518425822258, 0.085988849401474, 0.0, 0.023010844364762306, 0.0, 0.0676378458738327, 0.061589986085891724, 0.02981223352253437, 0.03354836627840996, 0.0379948616027832, 0.04365132376551628, 0.0286547914147377, 0.03866209462285042, 0.03467283770442009, 0.020947253331542015, 0.0437810905277729, 0.03520848974585533, 0.030972834676504135, 0.018557224422693253, 0.03552866727113724, 0.010336976498365402, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.013342865742743015, 0.009065402671694756, 0.031760718673467636, 0.02159995213150978, 0.007507604081183672, 0.07214376330375671, 0.037310756742954254, 0.055029913783073425, 0.013324612751603127, 0.03581457585096359, 0.07184229046106339, 0.022355053573846817, 0.09529736638069153, 0.020676864311099052, 0.05573515221476555, 0.03515492007136345, 0.07674787938594818, 0.0, 0.03654084727168083, 0.044378429651260376, 0.05790708586573601, 0.029054632410407066, 0.027962837368249893, 0.009998951107263565, 0.031594835221767426, 0.05194364860653877, 0.016478396952152252, 0.023244541138410568, 0.020894695073366165, 0.030298219993710518, 0.03940480947494507, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.03896529600024223, 0.026641154661774635, 0.06660964339971542, 0.011107578873634338, 0.05064469203352928, 0.018017174676060677, 0.03027702309191227, 0.018030140548944473, 0.05541054904460907, 0.040787141770124435, 0.0, 0.028278371319174767, 0.049063097685575485, 0.03408852219581604, 0.026785634458065033, 0.04850954934954643, 0.021147027611732483, 0.02970077469944954, 0.030552156269550323, 0.054889027029275894, 0.030007118359208107, 0.03886327147483826, 0.021138165146112442, 0.02185724303126335, 0.020210905000567436, 0.012415396980941296, 0.04752779379487038, 0.028833096846938133, 0.04159947484731674, 0.06436329334974289, 0.055309928953647614, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.020406099036335945, 0.03161321207880974, 0.019291341304779053, 0.014218577183783054, 0.017622560262680054, 0.06313778460025787, 0.0775064080953598, 0.022586727514863014, 0.01295322086662054, 0.028156157582998276, 0.02650834061205387, 0.00984952226281166, 0.013788028620183468, 0.037742845714092255, 0.04585598036646843, 0.029503874480724335, 0.0, 0.06858647614717484, 0.0, 0.013569622300565243, 0.05268209055066109, 0.0, 0.023981552571058273, 0.021303487941622734, 0.036548055708408356, 0.022907892242074013, 0.0, 0.014242244884371758, 0.06634636968374252, 0.024885553866624832, 0.0, 0.021593952551484108, 0.042606420814991, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.035968806594610214, 0.012727705761790276, 0.015346278436481953, 0.04246390610933304, 0.01841692067682743, 0.03491447865962982, 0.042682893574237823, 0.0427049845457077, 0.05148574709892273, 0.03868848830461502, 0.0, 0.031704604625701904, 0.054321326315402985, 0.08639026433229446, 0.026674345135688782, 0.018124254420399666, 0.034402500838041306, 0.01788477599620819, 0.03881850466132164, 0.02958063594996929, 0.03457023948431015, 0.0486316941678524, 0.013790051452815533, 0.026454288512468338, 0.02230415865778923, 0.03292755410075188, 0.023620812222361565, 0.047613032162189484, 0.06554252654314041, 0.013020840473473072, 0.021933285519480705, 0.02023175172507763, 0.012660857290029526, 0.025223325937986374, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.05657435581088066, 0.0, 0.039375968277454376, 0.019898150116205215, 0.032790493220090866, 0.01884673349559307, 0.026852231472730637, 0.024059824645519257, 0.0, 0.021879294887185097, 0.029252199456095695, 0.038027070462703705, 0.029256733134388924, 0.05734080448746681, 0.02166399173438549, 0.03261822089552879, 0.011461659334599972, 0.02364218607544899, 0.031715214252471924, 0.052358485758304596, 0.02474932186305523, 0.016356591135263443, 0.03044928051531315, 0.034890320152044296, 0.01878189668059349, 0.03353229537606239, 0.0, 0.06241042912006378, 0.0, 0.03166871890425682, 0.0421142652630806, 0.0, 0.04456702247262001, 0.021877408027648926, 0.0, 0.0, 0.0, 0.0], [0.011938870884478092, 0.030496718361973763, 0.016004415228962898, 0.0886281207203865, 0.014490684494376183, 0.024081364274024963, 0.022204410284757614, 0.021960515528917313, 0.021755291149020195, 0.016138868406414986, 0.013348708860576153, 0.01802951656281948, 0.02989858202636242, 0.014582904987037182, 0.0, 0.05888908728957176, 0.03710963949561119, 0.03211602196097374, 0.036528125405311584, 0.027167733758687973, 0.021937383338809013, 0.02820602059364319, 0.012160674668848515, 0.024895817041397095, 0.021749310195446014, 0.016399472951889038, 0.035535961389541626, 0.03611653298139572, 0.0, 0.0, 0.0, 0.06653553992509842, 0.03367302194237709, 0.03694474324584007, 0.02974032424390316, 0.04423902928829193, 0.0, 0.0, 0.0], [0.0, 0.03554423153400421, 0.05013546720147133, 0.019508691504597664, 0.029635228216648102, 0.0369403250515461, 0.012302572838962078, 0.03534369170665741, 0.01980842836201191, 0.041608791798353195, 0.01709957793354988, 0.0250095184892416, 0.035963792353868484, 0.011721133254468441, 0.028167370706796646, 0.014605876989662647, 0.02843892201781273, 0.017632614821195602, 0.024527059867978096, 0.022488445043563843, 0.041352082043886185, 0.02436179108917713, 0.036864493042230606, 0.021726733073592186, 0.031509194523096085, 0.021396173164248466, 0.025298209860920906, 0.0715671181678772, 0.06781920790672302, 0.042714543640613556, 0.017347928136587143, 0.011038037948310375, 0.0215179193764925, 0.053087666630744934, 0.030722839757800102, 0.020238209515810013, 0.02526768296957016, 0.0, 0.0], [0.02340962179005146, 0.026645151898264885, 0.016092883422970772, 0.018453406170010567, 0.0, 0.024529505521059036, 0.016422472894191742, 0.0, 0.0, 0.04067758098244667, 0.04319708049297333, 0.0, 0.03746350109577179, 0.03619860112667084, 0.0, 0.0284306388348341, 0.022127848118543625, 0.033096764236688614, 0.0, 0.029580311849713326, 0.03175744414329529, 0.02403065748512745, 0.0, 0.032011762261390686, 0.05366428196430206, 0.02002956159412861, 0.026871025562286377, 0.04143537953495979, 0.03431537747383118, 0.02501310221850872, 0.017144018784165382, 0.06347516179084778, 0.026965834200382233, 0.021599391475319862, 0.03299351781606674, 0.01776975393295288, 0.024357633665204048, 0.07007632404565811, 0.0], [0.009925410151481628, 0.020382679998874664, 0.022773344069719315, 0.023061836138367653, 0.02026316337287426, 0.021814879029989243, 0.009743220172822475, 0.03543981909751892, 0.01178984995931387, 0.009227154776453972, 0.0, 0.021253572776913643, 0.036486364901065826, 0.0509587787091732, 0.02875841036438942, 0.05591472610831261, 0.07920579612255096, 0.030996430665254593, 0.019020531326532364, 0.02842232957482338, 0.037824563682079315, 0.026725850999355316, 0.045420173555612564, 0.015772027894854546, 0.030804723501205444, 0.03712194040417671, 0.036269042640924454, 0.011644357815384865, 0.009864460676908493, 0.027975043281912804, 0.011707214638590813, 0.044539306312799454, 0.0, 0.03726140782237053, 0.0, 0.026777632534503937, 0.01596337929368019, 0.04453521594405174, 0.029432618990540504]]]], "left_text": ["<SOS>", "grabs", "comes", "grabs", "rafts", "uses", "reddish", "floral", "slab", "chow", "rink", "past", "fishers", "backs", "lap", "firefighters", "pursues", "appear", "pizza", "swerves", "scattered", "setting", "spreads", "least", "comic", "officials", "aquos", "football", "blonde", "cutting", "dunk", "tonge", "stocking", "accent", "theme", "prances", "placing", "trekkies", "canvas"], "right_text": ["<SOS>", "grabs", "comes", "grabs", "rafts", "uses", "reddish", "floral", "slab", "chow", "rink", "past", "fishers", "backs", "lap", "firefighters", "pursues", "appear", "pizza", "swerves", "scattered", "setting", "spreads", "least", "comic", "officials", "aquos", "football", "blonde", "cutting", "dunk", "tonge", "stocking", "accent", "theme", "prances", "placing", "trekkies", "canvas"]}], "default_filter": "0", "display_mode": "dark", "root_div_id": "bertviz-8bd47db68a9840e299d403af34b572db", "include_layers": [0], "include_heads": [0], "total_heads": 1} is a template marker that is replaced by actual params.
          const config = {};
  
          const MIN_X = 0;
          const MIN_Y = 0;
          const DIV_WIDTH = 970;
          const THUMBNAIL_PADDING = 5;
          const DETAIL_WIDTH = 300;
          const DETAIL_ATTENTION_WIDTH = 140;
          const DETAIL_BOX_WIDTH = 80;
          const DETAIL_BOX_HEIGHT = 18;
          const DETAIL_PADDING = 15;
          const ATTN_PADDING = 0;
          const DETAIL_HEADING_HEIGHT = 25;
          const HEADING_TEXT_SIZE = 15;
          const HEADING_PADDING = 5;
          const TEXT_SIZE = 13;
          const TEXT_PADDING = 5;
          const LAYER_COLORS = d3.schemeCategory10;
          const PALETTE = {
              'light': {
                  'text': 'black',
                  'background': 'white',
                  'highlight': '#F5F5F5'
              },
              'dark': {
                  'text': '#ccc',
                  'background': 'black',
                  'highlight': '#222'
              }
          }
  
          function render() {
  
              // Set global state variables
  
              var attData = config.attention[config.filter];
              config.leftText = attData.left_text;
              config.rightText = attData.right_text;
              config.attn = attData.attn;
              config.numLayers = config.attn.length;
              config.numHeads = config.attn[0].length;
              config.thumbnailBoxHeight = 7 * (12 / config.totalHeads);
              const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
              config.thumbnailHeight = Math.max(config.leftText.length, config.rightText.length) * config.thumbnailBoxHeight + 2 * THUMBNAIL_PADDING;
              config.thumbnailWidth = (DIV_WIDTH - axisSize) / config.totalHeads;
              config.detailHeight = Math.max(config.leftText.length, config.rightText.length) * DETAIL_BOX_HEIGHT + 2 * DETAIL_PADDING + DETAIL_HEADING_HEIGHT;
              config.divHeight = Math.max(config.numLayers * config.thumbnailHeight + axisSize, config.detailHeight);
  
              const vis = $(`#${config.rootDivId} #vis`)
              vis.empty();
              vis.attr("height", config.divHeight);
              config.svg = d3.select(`#${config.rootDivId} #vis`)
                  .append('svg')
                  .attr("width", DIV_WIDTH)
                  .attr("height", config.divHeight)
                  .attr("fill", getBackgroundColor());
  
              renderAxisLabels();
  
              var i;
              var j;
              for (i = 0; i < config.numLayers; i++) {
                  for (j = 0; j < config.numHeads; j++) {
                      renderThumbnail(i, j);
                  }
              }
          }
  
          function renderAxisLabels() {
              const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
              const tableWidth = config.thumbnailWidth * config.heads.length;
              config.svg.append("text")
                  .text("Heads")
                  .attr("fill", "black")
                  .attr("font-weight", "bold")
                  .attr("font-size", HEADING_TEXT_SIZE + "px")
                  .attr("x", axisSize + tableWidth / 2)
                  .attr("text-anchor", "middle")
                  .attr("y", 0)
                  .attr("dy", HEADING_TEXT_SIZE);
              for (let i = 0; i < config.numHeads; i++) {
                  config.svg.append("text")
                      .text(config.heads[i])
                      .attr("fill", "black")
                      .attr("font-size", TEXT_SIZE + "px")
                      .attr("x", axisSize + (i + .5) * config.thumbnailWidth)
                      .attr("text-anchor", "middle")
                      .attr("y", HEADING_TEXT_SIZE + HEADING_PADDING)
                      .attr("dy", TEXT_SIZE);
              }
              let x = 0;
              let y = axisSize + config.thumbnailHeight * config.layers.length / 2;
              console.log("x", x, y)
              config.svg.append("text")
                  .text("Layers")
                  .attr("fill", "black")
                  .attr("font-weight", "bold")
                  .attr("transform", "rotate(270, " + x  + ", " + y + ")")
                  .attr("font-size", HEADING_TEXT_SIZE + "px")
                  .attr("x", x)
                  .attr("text-anchor", "middle")
                  .attr("y", y)
                  .attr("dy", HEADING_TEXT_SIZE);
              for (let i = 0; i < config.numLayers; i++) {
                  x = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE; // HACK
                  y = axisSize + (i + .5) * config.thumbnailHeight;
                  config.svg.append("text")
                      .text(config.layers[i])
                      .attr("fill", "black")
                      .attr("font-size", TEXT_SIZE + "px")
                      .attr("x", x)
                      .attr("text-anchor", "end")
                      .attr("y", y)
                      .attr("dy", TEXT_SIZE / 2);
              }
          }
  
  
          function renderThumbnail(layerIndex, headIndex) {
              const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING
              const x = headIndex * config.thumbnailWidth + axisSize;
              const y = layerIndex * config.thumbnailHeight + axisSize;
              renderThumbnailAttn(x, y, config.attn[layerIndex][headIndex], layerIndex, headIndex);
          }
  
          function renderDetail(att, layerIndex, headIndex) {
              const axisSize = TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
              var xOffset = .8 * config.thumbnailWidth;
              var maxX = DIV_WIDTH;
              var maxY = config.divHeight - 3;
              var leftPos = axisSize + headIndex * config.thumbnailWidth;
              var x = leftPos + THUMBNAIL_PADDING + xOffset;
              if (x < MIN_X) {
                  x = MIN_X;
              } else if (x + DETAIL_WIDTH > maxX) {
                  x = leftPos + THUMBNAIL_PADDING - DETAIL_WIDTH + 8;
              }
              var posLeftText = x;
              var posAttention = posLeftText + DETAIL_BOX_WIDTH;
              var posRightText = posAttention + DETAIL_ATTENTION_WIDTH;
              var thumbnailHeight = Math.max(config.leftText.length, config.rightText.length) * config.thumbnailBoxHeight + 2 * THUMBNAIL_PADDING;
              var yOffset = 20;
              var y = layerIndex * thumbnailHeight + THUMBNAIL_PADDING + yOffset;
              if (y < MIN_Y) {
                  y = MIN_Y;
              } else if (y + config.detailHeight > maxY) {
                  y = maxY - config.detailHeight;
              }
              renderDetailFrame(x, y, layerIndex);
              y = y + DETAIL_PADDING;
              renderDetailHeading(x, y, layerIndex, headIndex);
              y = y + DETAIL_HEADING_HEIGHT;
              renderDetailText(config.leftText, "leftText", posLeftText, y , layerIndex);
              renderDetailAttn(posAttention, y, att, layerIndex, headIndex);
              renderDetailText(config.rightText, "rightText", posRightText, y, layerIndex);
          }
  
          function renderDetailHeading(x, y, layerIndex, headIndex) {
              var fillColor = getTextColor();
              config.svg.append("text")
                  .classed("detail", true)
                  .text('Layer ' + config.layers[layerIndex] + ", Head " + config.heads[headIndex])
                  .attr("font-size", TEXT_SIZE + "px")
                  .attr("font-weight", "bold")
                  .style("cursor", "default")
                  .style("-webkit-user-select", "none")
                  .attr("fill", fillColor)
                  .attr("x", x + DETAIL_WIDTH / 2)
                  .attr("text-anchor", "middle")
                  .attr("y", y)
                  .attr("height", DETAIL_HEADING_HEIGHT)
                  .attr("width", DETAIL_WIDTH)
                  .attr("dy", HEADING_TEXT_SIZE);
          }
  
          function renderDetailText(text, id, x, y, layerIndex) {
              var tokenContainer = config.svg.append("svg:g")
                  .classed("detail", true)
                  .selectAll("g")
                  .data(text)
                  .enter()
                  .append("g");
  
              var fillColor = getTextColor();
  
              tokenContainer.append("rect")
                  .classed("highlight", true)
                  .attr("fill", fillColor)
                  .style("opacity", 0.0)
                  .attr("height", DETAIL_BOX_HEIGHT)
                  .attr("width", DETAIL_BOX_WIDTH)
                  .attr("x", x)
                  .attr("y", function (d, i) {
                      return y + i * DETAIL_BOX_HEIGHT;
                  });
  
              var textContainer = tokenContainer.append("text")
                  .classed("token", true)
                  .text(function (d) {
                      return d;
                  })
                  .attr("font-size", TEXT_SIZE + "px")
                  .style("cursor", "default")
                  .style("-webkit-user-select", "none")
                  .attr("fill", fillColor)
                  .attr("x", x)
                  .attr("y", function (d, i) {
                      return i * DETAIL_BOX_HEIGHT + y;
                  })
                  .attr("height", DETAIL_BOX_HEIGHT)
                  .attr("width", DETAIL_BOX_WIDTH)
                  .attr("dy", TEXT_SIZE);
  
              if (id == "leftText") {
                  textContainer.style("text-anchor", "end")
                      .attr("dx", DETAIL_BOX_WIDTH - 2);
                  tokenContainer.on("mouseover", function (d, index) {
                      highlightSelection(index);
                  });
                  tokenContainer.on("mouseleave", function () {
                      unhighlightSelection();
                  });
              }
          }
  
          function highlightSelection(index) {
              config.svg.select("#leftText")
                  .selectAll(".highlight")
                  .style("opacity", function (d, i) {
                      return i == index ? 1.0 : 0.0;
                  });
              config.svg.selectAll(".attn-line-group")
                  .style("opacity", function (d, i) {
                      return i == index ? 1.0 : 0.0;
                  });
          }
  
          function unhighlightSelection() {
              config.svg.select("#leftText")
                  .selectAll(".highlight")
                  .style("opacity", 0.0);
              config.svg.selectAll(".attn-line-group")
                  .style("opacity", 1);
          }
  
          function renderThumbnailAttn(x, y, att, layerIndex, headIndex) {
  
              var attnContainer = config.svg.append("svg:g");
  
              var attnBackground = attnContainer.append("rect")
                  .attr("id", 'attn_background_' + layerIndex + "_" + headIndex)
                  .classed("attn_background", true)
                  .attr("x", x)
                  .attr("y", y)
                  .attr("height", config.thumbnailHeight)
                  .attr("width", config.thumbnailWidth)
                  .attr("stroke-width", 2)
                  .attr("stroke", getLayerColor(layerIndex))
                  .attr("stroke-opacity", 0)
                  .attr("fill", getBackgroundColor());
              var x1 = x + THUMBNAIL_PADDING;
              var x2 = x1 + config.thumbnailWidth - 14;
              var y1 = y + THUMBNAIL_PADDING;
  
              attnContainer.selectAll("g")
                  .data(att)
                  .enter()
                  .append("g") // Add group for each source token
                  .attr("source-index", function (d, i) { // Save index of source token
                      return i;
                  })
                  .selectAll("line")
                  .data(function (d) { // Loop over all target tokens
                      return d;
                  })
                  .enter() // When entering
                  .append("line")
                  .attr("x1", x1)
                  .attr("y1", function (d) {
                      var sourceIndex = +this.parentNode.getAttribute("source-index");
                      return y1 + (sourceIndex + .5) * config.thumbnailBoxHeight;
                  })
                  .attr("x2", x2)
                  .attr("y2", function (d, targetIndex) {
                      return y1 + (targetIndex + .5) * config.thumbnailBoxHeight;
                  })
                  .attr("stroke-width", 2.2)
                  .attr("stroke", getLayerColor(layerIndex))
                  .attr("stroke-opacity", function (d) {
                      return d;
                  });
  
              var clickRegion = attnContainer.append("rect")
                  .attr("x", x)
                  .attr("y", y)
                  .attr("height", config.thumbnailHeight)
                  .attr("width", config.thumbnailWidth)
                  .style("opacity", 0);
  
              clickRegion.on("click", function (d, index) {
                  var attnBackgroundOther = config.svg.selectAll(".attn_background");
                  attnBackgroundOther.attr("fill", getBackgroundColor());
                  attnBackgroundOther.attr("stroke-opacity", 0);
  
                  config.svg.selectAll(".detail").remove();
                  if (config.detail_layer != layerIndex || config.detail_head != headIndex) {
                      renderDetail(att, layerIndex, headIndex);
                      config.detail_layer = layerIndex;
                      config.detail_head = headIndex;
                      attnBackground.attr("fill", getHighlightColor());
                      attnBackground.attr("stroke-opacity", .8);
                  } else {
                      config.detail_layer = null;
                      config.detail_head = null;
                      attnBackground.attr("fill", getBackgroundColor());
                      attnBackground.attr("stroke-opacity", 0);
                  }
              });
  
              clickRegion.on("mouseover", function (d) {
                  d3.select(this).style("cursor", "pointer");
              });
          }
  
          function renderDetailFrame(x, y, layerIndex) {
              var detailFrame = config.svg.append("rect")
                  .classed("detail", true)
                  .attr("x", x)
                  .attr("y", y)
                  .attr("height", config.detailHeight)
                  .attr("width", DETAIL_WIDTH)
                  .style("opacity", 1)
                  .attr("stroke-width", 1.5)
                  .attr("stroke-opacity", 0.7)
                  .attr("stroke", getLayerColor(layerIndex));
          }
  
          function renderDetailAttn(x, y, att, layerIndex) {
              var attnContainer = config.svg.append("svg:g")
                  .classed("detail", true)
                  .attr("pointer-events", "none");
              attnContainer.selectAll("g")
                  .data(att)
                  .enter()
                  .append("g") // Add group for each source token
                  .classed('attn-line-group', true)
                  .attr("source-index", function (d, i) { // Save index of source token
                      return i;
                  })
                  .selectAll("line")
                  .data(function (d) { // Loop over all target tokens
                      return d;
                  })
                  .enter()
                  .append("line")
                  .attr("x1", x + ATTN_PADDING)
                  .attr("y1", function (d) {
                      var sourceIndex = +this.parentNode.getAttribute("source-index");
                      return y + (sourceIndex + .5) * DETAIL_BOX_HEIGHT;
                  })
                  .attr("x2", x + DETAIL_ATTENTION_WIDTH - ATTN_PADDING)
                  .attr("y2", function (d, targetIndex) {
                      return y + (targetIndex + .5) * DETAIL_BOX_HEIGHT;
                  })
                  .attr("stroke-width", 2.2)
                  .attr("stroke", getLayerColor(layerIndex))
                  .attr("stroke-opacity", function (d) {
                      return d;
                  });
          }
  
          function getLayerColor(layer) {
            return LAYER_COLORS[config.layers[layer] % 10];
          }
  
          function getTextColor() {
              return PALETTE[config.mode]['text']
          }
  
          function getBackgroundColor() {
             return PALETTE[config.mode]['background']
          }
  
          function getHighlightColor() {
             return PALETTE[config.mode]['highlight']
          }
  
          function initialize() {
              config.attention = params['attention'];
              config.filter = params['default_filter'];
              config.mode = params['display_mode'];
              config.layers = params['include_layers']
              config.heads = params['include_heads']
              config.totalHeads = params['total_heads']
              config.rootDivId = params['root_div_id'];
              $(`#${config.rootDivId} #filter`).on('change', function (e) {
                  config.filter = e.currentTarget.value;
                  render();
              });
          }
  
          initialize();
          render();
  
      });
</script>
</div>